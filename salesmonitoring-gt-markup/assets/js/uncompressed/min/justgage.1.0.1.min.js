function getRandomInt(t,i){return Math.floor(Math.random()*(i-t+1))+t}function cutHex(t){return"#"==t.charAt(0)?t.substring(1,7):t}function getStyle(t,i){var e="";return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(t,"").getPropertyValue(i):t.currentStyle&&(i=i.replace(/\-(\w)/g,function(t,i){return i.toUpperCase()}),e=t.currentStyle[i]),e}function onCreateElementNsReady(t){void 0!=document.createElementNS?t():setTimeout(function(){onCreateElementNsReady(t)},100)}JustGage=function(t){if(!t.id)return alert("Missing id parameter for gauge!"),!1;if(!document.getElementById(t.id))return alert('No element with id: "'+t.id+'" found!'),!1;this.config={id:t.id,title:t.title?t.title:"Title",titleFontColor:t.titleFontColor?t.titleFontColor:"#999999",value:t.value?t.value:0,valueFontColor:t.valueFontColor?t.valueFontColor:"#010101",min:t.min?t.min:0,max:t.max?t.max:100,showMinMax:null!=t.showMinMax?t.showMinMax:!0,gaugeWidthScale:t.gaugeWidthScale?t.gaugeWidthScale:1,gaugeColor:t.gaugeColor?t.gaugeColor:"#edebeb",label:t.label?t.label:"",showInnerShadow:null!=t.showInnerShadow?t.showInnerShadow:!0,shadowOpacity:t.shadowOpacity?t.shadowOpacity:.2,shadowSize:t.shadowSize?t.shadowSize:5,shadowVerticalOffset:t.shadowVerticalOffset?t.shadowVerticalOffset:3,levelColors:t.levelColors?t.levelColors:percentColors,levelColorsGradient:null!=t.levelColorsGradient?t.levelColorsGradient:!0,labelFontColor:t.labelFontColor?t.labelFontColor:"#b3b3b3",startAnimationTime:t.startAnimationTime?t.startAnimationTime:700,startAnimationType:t.startAnimationType?t.startAnimationType:">",refreshAnimationTime:t.refreshAnimationTime?t.refreshAnimationTime:700,refreshAnimationType:t.refreshAnimationType?t.refreshAnimationType:">"},t.value>this.config.max&&(this.config.value=this.config.max),t.value<this.config.min&&(this.config.value=this.config.min),this.originalValue=t.value,this.canvas=Raphael(this.config.id,"100%","100%");var i,e,a=1*getStyle(document.getElementById(this.config.id),"width").slice(0,-2),o=1*getStyle(document.getElementById(this.config.id),"height").slice(0,-2);a/o>1.25?(i=1.25*o,e=o):(i=a,e=a/1.25);var n=(a-i)/2,s=(o-e)/2,r=e/8>10?e/10:10,l=n+i/2,h=s+e/6.5,c=e/6.4>16?e/6.4:16,f=n+i/2,g=s+e/1.4,m=e/16>10?e/16:10,d=n+i/2,u=g+c/2+6,p=e/16>10?e/16:10,v=n+i/10+i/6.666666666666667*this.config.gaugeWidthScale/2,x=s+e/1.126760563380282,b=e/16>10?e/16:10,w=n+i-i/10-i/6.666666666666667*this.config.gaugeWidthScale/2,y=s+e/1.126760563380282;this.params={canvasW:a,canvasH:o,widgetW:i,widgetH:e,dx:n,dy:s,titleFontSize:r,titleX:l,titleY:h,valueFontSize:c,valueX:f,valueY:g,labelFontSize:m,labelX:d,labelY:u,minFontSize:p,minX:v,minY:x,maxFontSize:b,maxX:w,maxY:y},this.canvas.customAttributes.pki=function(t,i,e,a,o,n,s,r){var l,h=(1-(t-i)/(e-i))*Math.PI,c=a/2-a/10,f=c-a/6.666666666666667*r,g=a/2+n,m=o/1.25+s,d=a/2+n+c*Math.cos(h),u=o-(o-m)+s-c*Math.sin(h),p=a/2+n+f*Math.cos(h),v=o-(o-m)+s-f*Math.sin(h);return l+="M"+(g-f)+","+m+" ",l+="L"+(g-c)+","+m+" ",l+="A"+c+","+c+" 0 0,1 "+d+","+u+" ",l+="L"+p+","+v+" ",l+="A"+f+","+f+" 0 0,0 "+(g-f)+","+m+" ",l+="z ",{path:l}},this.gauge=this.canvas.path().attr({stroke:"none",fill:this.config.gaugeColor,pki:[this.config.max,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]}),this.gauge.id=this.config.id+"-gauge",this.level=this.canvas.path().attr({stroke:"none",fill:getColorForPercentage((this.config.value-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient),pki:[this.config.min,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]}),this.level.id=this.config.id+"-level",this.txtTitle=this.canvas.text(this.params.titleX,this.params.titleY,this.config.title),this.txtTitle.attr({"font-size":this.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.titleFontColor,"fill-opacity":"1"}),this.txtTitle.id=this.config.id+"-txttitle",this.txtValue=this.canvas.text(this.params.valueX,this.params.valueY,this.originalValue),this.txtValue.attr({"font-size":this.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.valueFontColor,"fill-opacity":"0"}),this.txtValue.id=this.config.id+"-txtvalue",this.txtLabel=this.canvas.text(this.params.labelX,this.params.labelY,this.config.label),this.txtLabel.attr({"font-size":this.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":"0"}),this.txtLabel.id=this.config.id+"-txtlabel",this.txtMin=this.canvas.text(this.params.minX,this.params.minY,this.config.min),this.txtMin.attr({"font-size":this.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":1==this.config.showMinMax?"1":"0"}),this.txtMin.id=this.config.id+"-txtmin",this.txtMax=this.canvas.text(this.params.maxX,this.params.maxY,this.config.max),this.txtMax.attr({"font-size":this.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":1==this.config.showMinMax?"1":"0"}),this.txtMax.id=this.config.id+"-txtmax";var A=this.canvas.canvas.childNodes[1],C="http://www.w3.org/2000/svg";9>ie?onCreateElementNsReady(function(){this.generateShadow()}):this.generateShadow(C,A),this.level.animate({pki:[this.config.value,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]},this.config.startAnimationTime,this.config.startAnimationType),this.txtValue.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType),this.txtLabel.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType)},JustGage.prototype.refresh=function(t){originalVal=t,t>this.config.max&&(t=this.config.max),t<this.config.min&&(t=this.config.min);var i=getColorForPercentage((t-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient);this.canvas.getById(this.config.id+"-txtvalue").attr({text:originalVal}),this.canvas.getById(this.config.id+"-level").animate({pki:[t,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale],fill:i},this.config.refreshAnimationTime,this.config.refreshAnimationType)};var percentColors=["#a9d70b","#f9c802","#ff0000"];JustGage.prototype.generateShadow=function(t,i){var e=document.createElementNS(t,"filter");e.setAttribute("id",this.config.id+"-inner-shadow"),i.appendChild(e);var a=document.createElementNS(t,"feOffset");a.setAttribute("dx",0),a.setAttribute("dy",this.config.shadowVerticalOffset),e.appendChild(a);var o=document.createElementNS(t,"feGaussianBlur");o.setAttribute("result","offset-blur"),o.setAttribute("stdDeviation",this.config.shadowSize),e.appendChild(o);var n=document.createElementNS(t,"feComposite");n.setAttribute("operator","out"),n.setAttribute("in","SourceGraphic"),n.setAttribute("in2","offset-blur"),n.setAttribute("result","inverse"),e.appendChild(n);var s=document.createElementNS(t,"feFlood");s.setAttribute("flood-color","black"),s.setAttribute("flood-opacity",this.config.shadowOpacity),s.setAttribute("result","color"),e.appendChild(s);var r=document.createElementNS(t,"feComposite");r.setAttribute("operator","in"),r.setAttribute("in","color"),r.setAttribute("in2","inverse"),r.setAttribute("result","shadow"),e.appendChild(r);var l=document.createElementNS(t,"feComposite");l.setAttribute("operator","over"),l.setAttribute("in","shadow"),l.setAttribute("in2","SourceGraphic"),e.appendChild(l),1==this.config.showInnerShadow&&(this.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"),this.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"))};var getColorForPercentage=function(t,i,e){var a=i.length;if(1===a)return i[0];for(var o=e?1/(a-1):1/a,n=new Array,s=0;s<i.length;s++){var r=e?o*s:o*(s+1),l=parseInt(cutHex(i[s]).substring(0,2),16),h=parseInt(cutHex(i[s]).substring(2,4),16),c=parseInt(cutHex(i[s]).substring(4,6),16);n[s]={pct:r,color:{r:l,g:h,b:c}}}if(0==t)return"rgb("+[n[0].color.r,n[0].color.g,n[0].color.b].join(",")+")";for(var s=0;s<n.length;s++)if(t<=n[s].pct){if(1==e){var f=n[s-1],g=n[s],m=g.pct-f.pct,d=(t-f.pct)/m,u=1-d,p=d,v={r:Math.floor(f.color.r*u+g.color.r*p),g:Math.floor(f.color.g*u+g.color.g*p),b:Math.floor(f.color.b*u+g.color.b*p)};return"rgb("+[v.r,v.g,v.b].join(",")+")"}return"rgb("+[n[s].color.r,n[s].color.g,n[s].color.b].join(",")+")"}},ie=function(){for(var t,i=3,e=document.createElement("div"),a=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->",a[0];);return i>4?i:t}();